---
tags:
  - hashcat
  - openssl
---

## Passwd file
When access normal user and cann't access root, check file `/etc/passwd`, use command
```bash
ls -l /etc/passwd
```

the result show:
```
-rwxrwxrwx 1 root root ...
```

that the it mean all user can edit this file and show content
```bash
root:x:1001:1001:root,,,:/home/root:/bin/bash
[--] - [--] [--] [-----] [--------] [--------]
|    |   |    |     |         |        |
|    |   |    |     |         |        +-> 7. Login shell
|    |   |    |     |         +----------> 6. Home directory
|    |   |    |     +--------------------> 5. GECOS
|    |   |    +--------------------------> 4. GID
|    |   +-------------------------------> 3. UID
|    +-----------------------------------> 2. Password
+----------------------------------------> 1. Username

```

So i am going to be able to replace this x with the hashed password, that the encrypt password created by command:
```bash
openssl passwd tai123
$1$QnYxZaN7$J52ngekQZLjNSXNvceNut0
```

replace `x` become `$1$QnYxZaN7$J52ngekQZLjNSXNvceNut0` 

final access root with password `$1$QnYxZaN7$J52ngekQZLjNSXNvceNut0`

> Find file have permisstions 777  and one way to clear file show `Permission denied` use comand `find / -type f - perm 777 2>/<name-file>`   

## Shadow file
Check permission file with `ls -l` if such as
```bash
-rwxrwxrwx 1 root shadow ...
```

Show content file:

```bash
mark:$6$.n.:17736:0:99999:7:::
[--] [----] [---] - [---] ----
|      |      |   |   |   |||+-----------> 9. Unused
|      |      |   |   |   ||+------------> 8. Expiration date
|      |      |   |   |   |+-------------> 7. Inactivity period
|      |      |   |   |   +--------------> 6. Warning period
|      |      |   |   +------------------> 5. Maximum password age
|      |      |   +----------------------> 4. Minimum password age
|      |      +--------------------------> 3. Last password change
|      +---------------------------------> 2. Encrypted Password
+----------------------------------------> 1. Username
```

Because i can change content so replace encrypted password such as `$6$.n.` become my encrypted password created with command

```bash 
openssl passwd -1 -salt <username> <password>
$1$mark$J52ngekQZLjNSXNvceNut0
```

### Case: Cann't change password
Create the files `hashpass` and `outputpass`.  
Copy the hashed password into `hashpass`.  
Use `hashcat` to crack the password:

```bash
hashcat -m 1800 -a 0 -o outputpass --remove hashpass SecList/Password/Common-Credentials/500-worst-passwords.txt
```

Result recorded in `hashpass`

## SUID